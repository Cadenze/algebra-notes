\chapter{Modules}\label{sec:modules}

\section{Basic Definitions}

\begin{definition}
    We recall from the previous chapter that
    a left module over a ring \(R\) is a quadruple \((M,+,\cdot,0)\)
    where \(0 \in M\) is a set equipped with addition \(+\)
    with an identity \(0\)
    and scalar multiplication,
    with the following four properties:
    \begin{enumerate}[label={(\roman*)}, itemsep=0mm]
        \item \((M,+,0)\) forms an abelian group;
        \item scalar multiplication
            \(\vfunc{\cdot}{R \times M}{M}{(\alpha,m)}{\alpha m}\),
            and in particular \(1m\);
        \item \(\forall\{\alpha,\beta\} \in R,\, \forall\{m,n\} \subset M\),
            the distributive laws \((\alpha+\beta)(m+n)
            = \alpha m+\alpha n+\beta m+\beta n\) hold; and
        \item associativity
            \(\forall\{\alpha,\beta\} \subset R,\,\forall m \in M\),
            \((\alpha\beta)m = \alpha(\beta m)\).
    \end{enumerate}
    A right module is similarly defined with the multiplication \(MR \subseteq M\) instead.
\end{definition}

\begin{definition}
    Suppose \(M\) is an \(R\)-module.
    \(M\) is generated by \(X \subseteq M\)
    if for any arbitrary \(m \in M\),
    there exists scalars \(a_i \in R\) and \(x_i \in X\) such that
    we have the finite sum \(m = \sum_i a_i x_i\).
\end{definition}

\begin{theorem}
    Suppose \(M\) is an abelian group.
    Then \(M\) is also:
    \begin{enumerate}[label={(\alph*)}, itemsep=0mm]
        \item a \(\bZ\)-module; and
        \item an \(R\)-module, where \(R = \End_\bZ(M)\).
    \end{enumerate}
\end{theorem}
\begin{proof}
    By definition, \(M\) is an abelian group.
    We can define scalar multiplication to be \(am = \underbrace{m+\cdots+m}_{a\,\text{times}}\),
    Then of course
    \begin{equation*}
        (a+b)(m+n) = \underbrace{(m+n)+\cdots+(m+n)}_{a+b\,\text{times}}
        = \underbrace{m+\cdots+m}_{a+b\,\text{times}} + \underbrace{n+\cdots+n}_{a+b\,\text{times}}
        = am + bm + an + bn
    \end{equation*}
    which is also obviously associative because
    \begin{equation*}
        (ab)m = \underbrace{m+\cdots+m}_{ab\,\text{times}}
        = \underbrace{bm+\cdots+bm}_{a\,\text{times}}
        = a(bm)
    \end{equation*}
    This proves part (a).

    For part (b), we have to first show that \(R = \End(M)\) is indeed a ring.
    Let \(\phi,\psi \in \End(M)\),
    and define addition as \((\phi+\psi)(m) = \phi(m)+\psi(m)\),
    and multiplication as function composition \((\phi\psi)(m) = (\phi\circ\psi)(m)\).
    Addition forms an abelian group,
    since the element-wise definition inherits closure, associativity, and commutativity,
    and the identity is defined trivially as the zero map \(m \mapsto 0\),
    so the inverse can be defined as \(m \mapsto -m\).
    Multiplication is associative by function composition,
    closure is inherited from \(M\),
    and identity is defined by \(m \mapsto m\).
    Distributivity is given by
    \begin{gather*}
        \phi(\psi+\chi)(m) = \phi(\psi(m)+\chi(m))
        = (\phi\circ\psi)(m) + (\phi\circ\chi)(m)
        = (\phi\psi+\phi\chi)(m)
    \end{gather*}

    Then, scalar multiplication can be defined as evaluation \(\phi m = \phi(m)\);
    and associativity holds by function composition.
    By the fact that we have homomorphisms,
    distributivity holds.
    \begin{equation*}
        (\phi+\psi)(m+n) = \phi(m+n) + \psi(m+n)
        = \phi(m) + \phi(n) + \psi(m) + \psi(n)
    \end{equation*}
    This proves part (b).
\end{proof}

% \begin{theorem}[Cayley's Theorem]
%     Suppose \(R\) is a ring,
%     and let \(M = (R,+,0)\) be its additive group, treated as a \(\bZ\)-module.
%     Then \(R \cong \End(M)\).
% \end{theorem}
% \begin{proof}
%     Consider \(\func{\ell_r}{m}{rm}\), and let us show that \(\ell_r \in \End_\bZ(M)\).
%     \begin{equation*}
%         \ell_r(am+n) = r(am+n) = a(rm)+rn = a\ell_r(m) + \ell_r(n)
%     \end{equation*}
%     Then we shall show that \(\vfunc{\phi}{R}{\End(M)}{r}{\ell_r}\) is an isomorphism.
%     Suppose \(\ell_r = \ell_s\).
%     Then for all \(m \in R\), \(\ell_r(m) = \ell_r(s)\),
%     and in particular, \(\ell_r(1) = r = s = \ell_r(1)\).
%     We have shown injectivity.
%     Suppose \(\phi \in \End(M)\), and that \(\phi(1) = r\).
%     We claim that \(\phi = \ell_r\),
%     and suppose, by way of contradiction, that it is not.
%     Then \(\phi - \ell_r \in \End(M)\) is a nonzero homomorphism,
%     so there exists some \(m \in M\) such that
%     \(\phi(m) - rm \neq 0\).
% \end{proof}
% \begin{remark}
%     This is the ring-theoretic analogue of
%     the \hyperref[thm:cayley]{group-theoretic Cayley's theorem}.
% \end{remark}

\begin{definition}
    Suppose \(M\) is an \(R\)-module.
    Then \(N \subseteq M\) is a subring if:
    \begin{enumerate}[label={(\roman*)}, itemsep=0mm]
        \item \((N,+,0) \subseteq (M,+,0)\) is a subgroup; and
        \item for all \(r \in R\), \(rn \in N\).
    \end{enumerate}
\end{definition}
\begin{lemma}
    Suppose \(M\) is an \(R\)-module,
    and \(N \subseteq M\) is a submodule.
    Then \(M/N\) forms an \(R\)-module.
\end{lemma}
\begin{proof}
    Clearly \(M/N\) readily forms an additive quotient group,
    as Proposition~\ref{prop:abelian-subgroup-normal} informs us that abelian subgroups are normal.
    Then scalar multiplication is \(r(x+N) = rx + rN = rx + N\).
    Distributivity and associativity is then inherited from \(M\).
\end{proof}
\begin{corollary}
    \(\vfunc{\pi}{M}{M/N}{x}{x+N}\) is the quotient homomorphism.
\end{corollary}
\begin{proof}
    All properties are inherited.
\end{proof}

\begin{definition}
    Suppose \(M\) is an \(R\)-module. Then \(M\) is 
    \begin{enumerate}[label={(\roman*)}, itemsep=0mm]
        \item finitely generated if there exists \({\{x_i\}}_{i=1}^n \subset M\) that generates \(M\); and
        \item a cyclic module if it can be generated by one element.
    \end{enumerate}
\end{definition}
\begin{definition}
    Suppose \(R\) is a commutative integral domain,
    and \(M\) is an \(R\)-module.
    \begin{enumerate}[label={(\roman*)}, itemsep=0mm]
        \item \(M\) is a torsion module if for all \(m \in M\),
            there exists a nonzero \(r \in R\) such that \(rm = 0\).
        \item \(M\) is torsion-free if \(rm = 0\) implies either \(r = 0\) or \(m = 0\).
    \end{enumerate}
\end{definition}
\begin{definition}
    Suppose \(M\) is an \(R\)-module.
    The annihilator of \(M\) is \(\Ann M = \{r \in R: rM = 0\}\).
\end{definition}


\section{Free Modules}

\begin{definition}
    Suppose \(M\) is an \(R\)-module.
    \(M\) is free if there is a basis \(X \subset M\);
    that is, \(X\) generates \(M\) (analogous to spanning)
    and \(X\) is linearly independent.
\end{definition}
\begin{remark}
    Throughout this chapter,
    we assume that any free module must be finitely generated;
    that is, they are free modules of finite rank.
\end{remark}
\begin{lemma}
    For any free \(R\)-module \(M\), \(M \cong R^n\).
\end{lemma}
\begin{proof}
    Consider the basis \({\{x_i\}}_{i=1}^n \subset M\).
    Let us construct the homomorphism \(\vfunc{\phi}{R^n}{M}{(a_1,\hdots,a_n)}{\sum a_i x_i}\).
    Linearity is obvious.
    \begin{equation*}
        \phi(c(a_1,\hdots,a_n)+(b_1,\hdots,b_n))
        = \sum (ca_i + b_i)x_i
        = c \sum a_i x_i + \sum b_i x_i
        = c\phi(a_1,\hdots,a_n) + \phi(b_1,\hdots,b_n)
    \end{equation*}
    Injectivity is given by linear independence.
    Surjectivity is given by spanning.
\end{proof}

\begin{lemma}\label{lem:free-module-homomorphism}
    Suppose \(M\) is a free \(R\)-module, \(N\) is any \(R\)-module,
    and \(X \subset M\) is a basis.
    Then \(\func{\phi}{M}{N}\) is wholly determined by the values \(\phi(x)\) for all \(x \in X\).
\end{lemma}
\begin{proof}
    Consider the basis \({\{x_i\}}_{i=1}^n \subset M\).
    If \(\phi(x_i) = \psi(x_i)\) for all \(x_i\),
    then any \(m = \sum a_i x_i\) must have an image
    \(\phi(m) = \sum a_i \phi(x_i) = \psi(m)\).
\end{proof}
\begin{theorem}
    Suppose \(M\) is a free \(R\)-module, and \(N\) is any \(R\)-module,
    and \(X \subset M\) is a basis.
    Given any \(x \in X\) and correspondingly \(n_x \in N\),
    there exists a unique \(\func{\phi}{M}{N}\) with \(\phi(x) = n_x\).
\end{theorem}
\begin{proof}
    The \hyperref[lem:free-module-homomorphism]{lemma above} proves existence.
    If there exists \(\phi \neq \psi\) that both fit this property,
    the \hyperref[lem:free-module-homomorphism]{lemma above}
    tells us that their images are the same.
\end{proof}
\begin{definition}
    Suppose \(\func{\phi}{R^n}{R^m}\) is a homomorphism between free \(R\)-modules.
    If \({\{x_i\}}_{i=1}^n \subset R^n\) is a basis,
    then we can write \(\phi(x_i) = (a_{1i},\hdots,a_{mi})\),
    and the entries \((a_{ij})\) is the matrix representation of \(\phi\).
\end{definition}

\begin{theorem}
    Suppose \(R\) is a (nontrivial) commutative ring.
    Then \(R^m \cong R^n\) implies \(m = n\).
\end{theorem}
\begin{proof}
    Let us have an isomorphism \(\func{\phi}{R^m}{R^n}\)
    Suppose, by way of contradiction, that \(m \neq n\).
    Without loss of generality let us assume that \(m < n\).
    There exists some inverse \(\func{\psi}{R^n}{R^m}\),
    and in particular, \(\phi\psi = \id\) on \(R^n\).
    But we know that we can extend \(\phi\) to some \(\func{\bar{\phi}}{R^m \oplus R^{n-m}}{R^n}\),
    with \(\eval{\bar{\phi}}_{R^{n-m}} = 0\),
    and similarly we can write \(\func{\bar{\psi}}{R^n}{R^m \oplus R^{n-m}}\)
    by padding it with zeroes.
    Let \(\bar{\phi}\) and \(\bar{\psi}\) have matrices \(\vb{A}\) and \(\vb{B}\) respectively.
    Then as \(\vb{A}\vb{B} = \vb{I}\), we have \((\det\vb{A})(\det\vb{B}) = 1\).
    But by construction, the padding of zeroes on \(\bar{\psi}\)
    is going to leave us with rows of zeroes on \(\vb{B}\),
    which implies \(\det\vb{B} = 0\).
    Hence \(0 = 1\), and we have reached a contradiction.
\end{proof}
\begin{remark}
    This proof only works for commutative rings,
    as the notion of a determinant does not exist without commutativity.
    On the other hand, there are noncommutative rings with an invariant basis number.
\end{remark}
\begin{corollary}
    Suppose \(F\) is a field.
    Then \(F^m \cong F^n\) implies \(m = n\).
\end{corollary}
\begin{proof}
    Fields are commutative rings.
\end{proof}
\begin{definition}
    The dimension of a vector space is the cardinality of its basis.
\end{definition}
\begin{remark}
    Any such ring with this property is said to have an invariant basis number,
    which means its rank is well-defined;
    this is analogous to the dimension vector space being well-defined.
\end{remark}


\section{Isomorphism Theorems}

\begin{theorem}[Universal Property of Quotient Submodules]
    Let \(M,N\) be \(R\)-modules, and \(K \subseteq M\) be a submodule.
    Suppose \(\func{\pi}{M}{M/K}\) is the quotient homomorphism
    and \(\func{\phi}{M}{N}\) is any module homomorphism, with \(K \subseteq \ker\phi\).
    Then there exists a unique module homomorphism \(\func{\bar{\phi}}{M/K}{N}\)
    such that \(\phi = \bar{\phi}\circ\pi\).

    This is represented by the following commutative diagram:
    \begin{center}
        \begin{tikzcd}
            M \arrow{r}{\phi} \arrow{d}{\pi} & N \\
            M/K \arrow[dashrightarrow]{ru}[swap]{\exists! \bar{\phi}}
        \end{tikzcd}
    \end{center}
\end{theorem}
\begin{proof}
    We first assume that \(\bar{\phi}\) exists and attempt to prove its uniqueness.
    Suppose \(\phi = \bar{\phi}\circ\pi = \bar{\phi}'\circ\pi\).
\end{proof}

\begin{theorem}[First Isomorphism Theorem for Modules]\label{thm:iso-1-mod}
    Suppose \(\func{\phi}{M}{N}\) is an \(R\)-module homomorphism,
    and \(K = \ker\phi\). We have:
    \begin{enumerate}[label={(\alph*)}, itemsep=0mm]
        \item \(K \subseteq M\), the kernel is a submodule;
        \item \(\img\phi \subseteq N\), the image is a submodule; and
        \item \(\img\phi \cong M/K\), the image is uniquely isomorphic to the quotient submodule.
    \end{enumerate}
    This is represented by the following commutative diagram:
    \begin{center}
        \begin{tikzcd}
            M \arrow{rd}{\phi} \arrow{d}{\pi} & N \\
            M/K \arrow{r}{\cong} & \img\phi \arrow[dash]{u}
        \end{tikzcd}
    \end{center}
\end{theorem}
\begin{proof}
    Suppose \(\{x,y\} \subset \ker\phi\).
    Then \(\phi(rx+y) = \phi(rx) + \phi(y) = r\phi(x) + \phi(y) = 0\).
    This proves part (a).

    Now suppose \(\{\phi(x),\phi(y)\} \subset \img\phi\).
    Then \(r\phi(x)+\phi(y) = \phi(rx)+\phi(y) = \phi(rx+y)\).
    This proves part (b).

    
\end{proof}


% Put extra stuff from Commutative Algebra here

% \section{Modules over Principal Ideal Domains}

% \begin{theorem}[Structure Theorem for Modules over a PID]
%     Suppose \(R\) is a PID,
%     and \(M\) is a finitely generated \(R\)-module.
%     Then we can write our module as a direct sum of free and torsion parts,
%     \(M \cong R^s \oplus \bigoplus_{i=1}^r R/(d_i)\), where \(d_i \mid d_{i+1}\).
% \end{theorem}
% \begin{proof}
%     Suppose \(M\) is generated by the set \({\{w_i\}}_{i=1}^n\).
%     Then there exists a homomorphism \(\vfunc{\phi}{R^n}{M}{(a_1,\hdots,a_n)}{\sum a_i w_i}\),
%     which is surjective by definition of generation.
%     Hence by the \hyperref[thm:iso-1-mod]{first homomorphism theorem},
%     \(M \cong R^n/\ker\phi\).

%     \medskip

%     We now aim to show that \(\ker\phi\) is free,
%     of rank no more than \(n\), via induction.
%     For the base case of \(n = 1\),
%     a submodule \(\ker\phi \subseteq R\) is an ideal.
%     Since \(R\) is a PID, \(\ker\phi = (d) = dR\) is generated by a single element.
%     Let us consider the module homomorphism \(\vfunc{\phi}{R}{dR}{r}{dr}\).
%     As \(R\) is a domain, there are no zero divisors, so \(\phi\) is injective.
%     This is also trivially surjective if \(d \neq 0\),
%     and if \(d = 0\) we have \(dR \cong R^0 = \{0\}\) which is also free.

%     Now suppose that \(\ker\phi \subseteq R^{n-1}\) implies \(K \cong R^m\) for some \(m \leq n-1\),
%     and prove that \(\ker\phi \subseteq R^n\) implies \(K \cong R^m\) for some \(m \leq n\).
%     Consider an arbitrary \(k \in \ker\phi \subseteq R^n\),
%     and write that element as \(k = (k_1,\hdots,k_n)\).
%     Consider the ideal generated by all first components \(I = {(k_1)}_{k \in K} \subseteq R\).
%     If \(I = (0)\) is the zero ideal, then \(K \subseteq R^{n-1}\), and the inductive hypothesis suffices.

%     On the other hand, if \(I \neq (0)\), then by \(R\) being a PID,
%     \(I = (d) = dR\) must be generated by a single element again.
%     Now let us write a basis \({\{k_i\}}_{i=1}^n \subset R^n\),
%     with first components \({\{k_{i1}\}}_{i=1}^n = {\{d_i\}}_{i=1}^n \subset R\).
%     Then \(d\) can be written as a linear combination \(d = \sum a_i d_i\);
%     correspondingly, we can construct some \(\tilde{k} = \sum a_i k_i\),
%     so that its first component \(\tilde{k}_1 = d\).

%     Let us shift our attention to coordinates other than the first one.
%     Consider \(K_1 = \ker\phi \cap \{(0,a_2,\hdots,a_n)\}\),
%     the projection of \(\ker\phi\) into everything but the first coordinate.
%     Clearly this is a submodule \(K_1 \subseteq R^{n-1}\),
%     which the inductive hypothesis says is free.
%     Let \({\{f_i\}}_{i=1}^r \subset K_1\) be a basis, with \(r \leq n-1\).
%     We claim that \({\{f_i\}}_{i=0}^r \subset \ker\phi\),
%     with \(f_0 = \tilde{k}\) in the paragraph above, is a basis.

%     Consider an arbitrary \(k \in \ker\phi\),
%     which can be written as \(k = (a_1,\hdots,a_n)\).
%     Then \(a_1 \in I\), so \(d \mid a_1\),
%     and there exists some \(c\) such that \(cd = a_1\).
%     Then \(cf_0\) would have exactly \(a_1\) in its first component,
%     and we observe that \(k - cf_0 \in K\), which also has a zero first component;
%     so \(k - cf_0 \in K_1\), which can be written as \(\sum_{i=1}^r a_i f_i\).
%     Hence we have spanning.

%     We now check linear independence.
%     Suppose \(\sum_{i=0}^r a_i f_i = \sum_{i=0}^r b_i f_i\).
%     Then after reorganizing the terms,
%     \(a_0 f_0 - b_0 f_0 = \sum_{i=1}^r (b_i-a_i)f_i\).
%     But on the right side, the first component is zero by definition,
%     so we have shown that \((a_0 - b_0)d = 0\),
%     which forces \(a_0 = b_0\) by definition of a domain.
%     Then linear independence in \(K_1\) suffices for the right side.
%     Hence \(K\) is free.

%     \medskip


% \end{proof}
